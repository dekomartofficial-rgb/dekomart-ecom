<div class="main-header">
  <div class="col-md-12 page-header d-flex align-items-center mb-3">
    <i class="fa-solid fa-screwdriver-wrench fa-xl me-2" style="color: #153477;  padding-top: 25px;"></i>
    <h6 style="font-weight: 600; font-size: 24px; margin-bottom: 0;">Role Access</h6>
  </div>
  <div class="main-content-body shadow-sm">
    <div class="table-container d-flex row" style="padding: 14px;">
      <!-- Role List Column -->
      <div class="col-lg-3 col-md-4 roles-screen mb-3 mb-md-0">
        <div class="col-12 mb-2 d-flex justify-content-between align-items-center">
            <h2 class="fw-bold m-0">Roles</h2>
            <button type="button" class="btn btn-success btn-sm" (click)="addRole()"><i class="fa-solid fa-plus me-2" ></i>Add Role</button>
        </div>  
        <div class="col-12 roles-container">
          @for (item of Role; track $index) {
          <div class="col-12 roles-list" (click)="getRoleScreen(item.RoleCode)" [className]="clickedRole === item.RoleCode ? 'clicked-role roles-list': 'roles-list' ">
            <h6 class="mb-0">{{ item.RoleName }}</h6>
          </div>
          }
        </div>
      </div>
      
      <!-- Screen List Column -->
      <div class="col-lg-9 col-md-8">
        <div class="col-12 d-flex row align-items-center mb-3">
          <div class="col-md-8 col-7">
            <h2 class="screen-list-title fw-bold mb-0">Screen List</h2>
          </div>
          <div class="col-md-4 col-5 d-flex justify-content-end">
              <button type="button" class="btn btn-success btn-sm" (click)="saveRole()">
                <i class="fa-regular fa-floppy-disk me-2"></i>Save
              </button>
          </div>
        </div>
        <div class="col-12 screen-list-header">
          <div class="col-12 screen-list parent-container"> 
            @if (RoleScreen && RoleScreen.length > 0) {
              @for (group of groupName; track $index) {
              <div class="main-parent-content"> 
                <div class="role-screen-group d-flex align-items-center">
                  <div class="group-icon"><i [className]="group.GroupIcon" style="color: #153477;"></i></div>
                  <h3 class="group-name ms-2" style="padding-top: 3px;">{{ group.ScreenGroupName }}</h3>
                  <span class="toggle-icon ms-auto"><i class="bi bi-chevron-down"></i></span>
                </div>
                <div class="child-container">
                  @for (item of GroupChildList; track $index) {
                      @if (item.ScreenGroupName === group.ScreenGroupName) {
                        <div class="child-item">
                          <div class="item-icon">
                            <i class="fa-solid" [className]="item.WindowIcon"></i>
                          </div>
                          <h3 class="screen-name">{{ item.WindowName }}</h3>
                          <div class="access-toggle-1">
                            <div class="form-check form-switch justify-content-end d-flex align-items-center">
                              <label class="form-check-label me-2" for="flexSwitchCheckDefault-{{ $index }}">
                                {{ item.IsAccess && item.IsAccess === 'true' ? 'Access' : 'No Access' }}
                              </label>
                              <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault-{{ $index }}"
                                [checked]="item.IsAccess === 'true'" (click)="updateAccess($event, $index)">
                            </div>
                            
                          </div>
                        </div>
                    }
                  }
                </div>
              </div>
              }
            } @else {
              <div class="no-role-message">
                <div class="text-center py-5">
                  <i class="fa-solid fa-circle-exclamation fa-3x mb-3" style="color: #6c757d;"></i>
                  <h4>Please select a role</h4>
                </div>
              </div>
            } 
          </div>  
        </div>
      </div>
    </div>
  </div>
</div>